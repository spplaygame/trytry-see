<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>æ•™è‚²æµ®èª‡å‡å®˜å¤§ä½œæˆ°</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta property="og:title" content="æ•™è‚²æµ®èª‡å‡å®˜å¤§ä½œæˆ°ï½œä½ æ˜¯å“ªç¨®è€å¸«ï¼Ÿ" />
  <meta property="og:description" content="è¼¸å…¥ä½ çš„æ•™è‚²ç†å¿µï¼Œç«‹å³ç²å¾—åˆ†æ•¸ã€å®˜è·ã€äººæ ¼å¡ç‰Œåˆ†æï¼" />
  <meta property="og:image" content="https://i.imgur.com/your-image.png" />
  <meta property="og:url" content="https://spplaygame.github.io/trytry-see/" />

  <style>
    body {
      font-family: "Noto Sans TC", sans-serif;
      background: #fdfdfd;
      color: #333;
      padding: 2em;
      max-width: 720px;
      margin: auto;
    }
    textarea, input {
      width: 100%;
      margin-bottom: 1em;
      padding: 0.6em;
      font-size: 1rem;
    }
    button {
      padding: 0.5em 1em;
      font-size: 1rem;
      cursor: pointer;
      margin-bottom: 1.5em;
    }
    h2 {
      margin-top: 2em;
      border-bottom: 1px solid #ddd;
      padding-bottom: 0.3em;
    }
    .card {
      font-size: 1.1em;
      background: #f2f2f2;
      padding: 1em;
      border-radius: 0.5em;
      margin: 1em 0;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .highlight {
      color: #d93;
      font-weight: bold;
    }
    ul {
      padding-left: 1.5em;
    }
    em {
      font-style: italic;
    }
  </style>
</head>
<body>
  <h1>âœ¨ æ•™è‚²æµ®èª‡å‡å®˜å¤§ä½œæˆ° âœ¨</h1>

  <label for="name">æš±ç¨±ï¼š</label>
  <input id="name" placeholder="åŒ¿åç²‰ç­†ä¿ "/>

  <label for="idea">è¼¸å…¥ä½ çš„æ•™è‚²ç†å¿µï¼š</label>
  <textarea id="idea" rows="4" placeholder="åœ¨å­¸ç¿’ç”Ÿæ…‹ç³»ä¸­é›é€ å…¨äººç™¼å±•çŸ©é™£..."></textarea>

  <button onclick="startEvaluation()">é–‹å§‹è©•é‘‘ï¼</button>

  <div id="result" class="card"></div>

  <h2>ğŸ§  æ•™è‚²äººæ ¼å¡ç‰Œåˆ†æ</h2>
  <div id="card" class="card"></div>

  <h2>ğŸ“š å€‹äººæˆå°±å±•ç¤ºç‰†</h2>
  <ul id="history"></ul>
<script>
const buzzWords = [
  "æœªä¾†é‡å­ç´š", "å…¨åŸŸç„¡ç¸«", "è¶…ç¶­åº¦", "å®‡å®™ç´š", "è·¨æ˜Ÿç³»", "å…ƒå®‡å®™", "é ‚è¦æ——è‰¦",
  "ğ“†ç´š", "AI é©…å‹•", "å€å¡ŠéˆåŒ–", "å››å€é€Ÿ", "å­¸ç¿’ç”Ÿæ…‹ç³»", "äººæ‰ç…‰é‡‘è¡“",
  "æ™ºæ…§é›²ç«¯æ ¡åœ’", "çœŸÂ·å…¨äººç™¼å±•çŸ©é™£", "ç´ é¤Šå…ƒä»¶åº«", "æ½›èƒ½åŠ é€Ÿå™¨",
  "æ•™è‚²é»‘ç§‘æŠ€", "å…±æŒ¯å¢å¹…", "éˆçµå‡é »", "é«˜ç¶­å°è£", "æ·±åº¦è³¦éˆ", "è£‚è®Šå¼æ“´æ•£"
];

const rankLevels = [
  { threshold: 0, title: "ğŸ§¹ ä»£ç†ä»£èª²è€å¸«", note: "é‚„æ²’é ˜ç·¨åˆ¶ï¼Œå…ˆåŠ æ²¹ ğŸ’ª" },
  { threshold: 40, title: "ğŸ“’ å°ˆä»»æ•™å¸«", note: "æ•™æ¡ˆå †ç©å¦‚å±±ä¸­â€¦" },
  { threshold: 60, title: "ğŸ—‚ æ•™å­¸çµ„é•·", note: "ä¸ä¸Šèª²å»æ›´å¿™çš„é‚£ä½" },
  { threshold: 80, title: "ğŸ§¯ å­¸å‹™ä¸»ä»»", note: "è¢«å®¶é•·è·Ÿå­¸ç”Ÿå…©é ­ç‡’ ğŸ”¥" },
  { threshold: 100, title: "ğŸ« æ ¡é•·", note: "æ ¡å‹™ç¹å¿™ï¼Œä½†æƒ³é€€ä¼‘ ğŸ§“" },
  { threshold: 120, title: "ğŸ•µï¸ ç£å­¸", note: "å‚³èªªä¸­çš„çªè¥²æª¢æŸ¥è€… ğŸ‘€" },
  { threshold: 140, title: "ğŸ“Š æ•™è‚²å¸é•·", note: "è¬›è©±è¦æŠ¼éŸ»ã€å ±å‘Šä¸èƒ½å°‘å­— âœï¸" },
  { threshold: 160, title: "ğŸŒ€ æ•™è‚²æ¬¡é•·", note: "è¦‹è­‰æ”¿ç­–èµ·è½çš„ç”·äººï¼å¥³äºº" },
  { threshold: 180, title: "ğŸ‘‘ æ•™è‚²éƒ¨é•·", note: "è¢«å…¨æ°‘æª¢è¨çš„ç¥è· ğŸ‘‘" }
];

const personaCards = [
  {
    id: "rigid", card: "ğŸ“ æ•™æ¢æ´¾è£½è¡¨å¸«ï¼ˆRï¼‰",
    rule: (s, txt, buzz) => /è©•é‘‘|æ ¼å¼|æ¨¡çµ„|è¡¨å–®|è«‹å‡/.test(txt)
  },
  {
    id: "idealist", card: "ğŸŒ¸ æµªæ¼«å¼å°å¸«ï¼ˆSRï¼‰",
    rule: (s, txt, buzz) => txt.length < 40 && buzz < 2
  },
  {
    id: "influencer", card: "ğŸ“² ç¤¾ç¾¤ç¶“ç‡Ÿè–æ‰‹ï¼ˆSSRï¼‰",
    rule: (s, txt, buzz) => /ç¤¾ç¾¤|è‡ªåª’é«”/.test(txt)
  },
  {
    id: "alchemist", card: "ğŸ§ª æ•™è‚²ç…‰é‡‘è¡“å£«ï¼ˆURï¼‰",
    rule: (s, txt, buzz) => buzz >= 5 && txt.length > 60
  },
  {
    id: "ghost", card: "ğŸ‘» è©•é‘‘æ©Ÿæ§‹å¹½éˆï¼ˆSSRï¼‰",
    rule: (s, txt, buzz) => buzz >= 4 && s < 120
  },
  {
    id: "legend", card: "ğŸ§™ å‚³èªªä¸­çš„æ•™ç ”ä»™äººï¼ˆLRï¼‰",
    rule: (s, txt, buzz) => s > 180 && buzz >= 6
  },
  {
    id: "kpi", card: "ğŸª™ æ•™è‚² KPI éŠé‡‘å·¥åŒ ï¼ˆRï¼‰",
    rule: (s, txt, buzz) => /ç¸¾æ•ˆ|é‡åŒ–|è³‡æ–™/.test(txt)
  },
  {
    id: "branding", card: "ğŸ§¼ æ ¡åœ’å“ç‰Œç‡Ÿé‹å¸«ï¼ˆSRï¼‰",
    rule: (s, txt, buzz) => /é¡˜æ™¯|è­˜åˆ¥|å“ç‰Œ/.test(txt)
  },
  {
    id: "tactic", card: "ğŸ¥½ é«˜ç¶­è¨ˆç•«æ“ç›¤å“¡ï¼ˆSSRï¼‰",
    rule: (s, txt, buzz) => /ç­–ç•¥|è³‡æº|æ“ä½œ/.test(txt)
  },
  {
    id: "collab", card: "ğŸ§µ å…±å­¸ç·¨ç¹”è€…ï¼ˆSRï¼‰",
    rule: (s, txt, buzz) => /å…±å­¸|äº’å‹•|å…±å‚™/.test(txt)
  },
  {
    id: "grounded", card: "ğŸ› ï¸ æ•™è‚²ç¾å ´ä¿®è£œåŒ ï¼ˆRï¼‰",
    rule: (s, txt, buzz) => buzz === 0 && txt.length > 50
  },
  {
    id: "narrative", card: "ğŸ­ åŠ‡å ´å¼æ•˜äº‹è¬›å¸«ï¼ˆSRï¼‰",
    rule: (s, txt, buzz) => /æ•˜äº‹|æƒ…å¢ƒ|è§’è‰²/.test(txt)
  },
  {
    id: "mi", card: "ğŸ§© å¤šå…ƒæ™ºèƒ½æ¢ç´¢è€…ï¼ˆSSRï¼‰",
    rule: (s, txt, buzz) => /å¤šå…ƒ|é©æ€§|å¤©è³¦/.test(txt)
  },
  {
    id: "flat", card: "ğŸ“‰ æ•™å­¸ä½é »å…±æŒ¯è€…ï¼ˆNï¼‰",
    rule: (s, txt, buzz) => s < 30 && txt.length < 40
  },
  {
    id: "meta", card: "ğŸ”® å…ƒå®‡å®™é‡å­ç´ é¤Šç¸½æ•™å®˜ï¼ˆURï¼‰",
    rule: (s, txt, buzz) => buzz >= 8 && txt.length >= 80
  }
];
function assignPersonaCard(score, idea, buzzCount) {
  for (const p of personaCards) {
    if (p.rule(score, idea, buzzCount)) return p.card;
  }
  return "ğŸ¤” å°šæœªè¦ºé†’çš„æ•™è‚²æ½›èƒ½é«”ï¼ˆCï¼‰";
}

function startEvaluation() {
  const name = (document.getElementById("name").value.trim() || "åŒ¿åç²‰ç­†ä¿ ").slice(0, 12);
  const idea = document.getElementById("idea").value.trim();
  if (!idea) return alert("è«‹å…ˆè¼¸å…¥ä¸€æ®µæ•™è‚²ç†å¿µï¼");

  const buzzCount = buzzWords.reduce((acc, word) => {
    const re = new RegExp(word.replace(/[.*+?^${}()|[\]\\]/g, "\\$&"), "gi");
    const matches = idea.match(re);
    return acc + (matches ? matches.length : 0);
  }, 0);

  const baseScore = buzzCount * 25;
  const lengthBonus = Math.min(idea.length, 60) * 0.3;
  const randomBonus = Math.floor(Math.random() * 20);
  const score = Math.round(baseScore + lengthBonus + randomBonus);

  // å®˜è·è¨ˆç®—
  const matchedRank = rankLevels.slice().reverse().find(r => score >= r.threshold);
  const rankTitle = matchedRank.title;
  const rankNote = matchedRank.note;

  let tip = "";
  if (score < 40) {
    tip = `<br><br><em style="color:#b00;">åˆ†æ•¸ç•¥ä½ï¼Œå¯å¤šä½¿ç”¨å¦‚ã€Œå®‡å®™ç´šã€ã€ŒAI é©…å‹•ã€ã€Œæ•™è‚²é»‘ç§‘æŠ€ã€ç­‰æµ®èª‡é—œéµè©ï¼Œä¸¦å¢åŠ æè¿°å…§å®¹âœ¨</em>`;
  }

  document.getElementById("result").innerHTML =
    `${name} çš„ç†å¿µç¸½åˆ†ç‚º <span class="highlight">${score}</span> åˆ†<br>
     å®˜è·é æ¸¬ï¼š<strong>${rankTitle}</strong><br><em>${rankNote}</em>${tip}`;

  // æ•™è‚²äººæ ¼å¡ç‰Œ
  const persona = assignPersonaCard(score, idea, buzzCount);
  document.getElementById("card").innerHTML = `äººæ ¼å¡ç‰Œåˆ¤å®šçµæœï¼š<strong>${persona}</strong>`;

  // å„²å­˜åˆ° localStorage
  const history = JSON.parse(localStorage.getItem("eduBuzzHistory") || "[]");
  history.push({ name, score, rank: rankTitle, persona });
  localStorage.setItem("eduBuzzHistory", JSON.stringify(history));
  renderHistory();
}

function renderHistory() {
  const history = JSON.parse(localStorage.getItem("eduBuzzHistory") || "[]").slice(-10);
  const ul = document.getElementById("history");
  ul.innerHTML = "";
  history.reverse().forEach(entry => {
    const li = document.createElement("li");
    li.innerHTML = `${entry.name}ï½œ${entry.score} åˆ†ï½œ${entry.rank}ï½œ<strong>${entry.persona}</strong>`;
    ul.appendChild(li);
  });
}

renderHistory();
</script>
</body>
</html>
